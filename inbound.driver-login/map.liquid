{
    "dtos": [
        {
            "type": "{{ input.MessageProperties.EventType }}",
            "data": {
                "MessageGuid": "{{ input.MessageProperties.MessageId }}",
                "ParentMessageGuid": "{{ input.MessageProperties.AuditId }}",
                "MessageContentType": "{{ input.MessageProperties.EventType }}",
                "MessageContent": {
                    "Odometer": {
                        {input.Content.Odometer | default: 0.0
                        }
                    },
                    "UnitTrips": "{{input.Content.UnitTrips}}",
                    "Position": "{{input.Content.Position}}",
                    "TripInformation": {
                        "TripName": "{{input.Content.TripInformation.TripName}}",
                        "Move": {
                            {input.Content.TripInformation.Move | default: 0.0
                            }
                        },
                        "Leg": {
                            {input.Content.TripInformation.Leg | default: 0.0
                            }
                        },
                        "Stop": {
                            {input.Content.TripInformation.Stop | default: 0.0
                            }
                        },
                        "OrderHeader": {
                            {input.Content.TripInformation.OrderHeader | default: 0.0
                            }
                        },
                        "Assets": [
                            {% assign separator = "" %
                            }{% for asset in input.Assets %
                            }{
                                { separator
                                }
                            }{
                                "Type": {
                                    { asset.Type
                                    }
                                },
                                "Id": {
                                    { asset.Id
                                    }
                                },
                                "Confirmed": {
                                    {asset.Confirmed | default: false
                                    }
                                }
                            }{% assign separator = "," %
                            }{% endfor %
                            }
                        ],
                        "AdditionalDataElements": "{{input.Content.TripInformation.AdditionalDataElements}}"
                    },
                    "HeaderInformation": {
                        "CreateDateUtc": "{{input.Content.HeaderInformation.CreateDateUtc  | date: "%Y-%m-%dT%H:%M:%S+00: 00"}}"
                    }
                }
            }
        }
    ]
}